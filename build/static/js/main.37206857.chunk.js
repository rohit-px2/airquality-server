(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{48:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(2),r=n(16),s=n.n(r),o=(n(48),n(25)),i=n(6),l=n(10),u=n.n(l),d=n(14),j=n(15),h=n.n(j),b="/api/info",p="/api/users/location";function x(){return(x=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(b,"/").concat(t.country,"/").concat(t.city));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(p,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m={getAQI:function(e){return x.apply(this,arguments)},create:function(e){return O.apply(this,arguments)}},f="/api/location";function g(){return(g=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get(f);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v={getLocation:function(){return g.apply(this,arguments)}};function y(){return Object(a.jsxs)("footer",{className:"container py-5 transparent",children:[Object(a.jsx)("h2",{className:"text-center text-white",children:"Information Provided by the World Air Quality Index"}),Object(a.jsxs)("h3",{className:"m-4 text-center text-white",children:["Website made by",Object(a.jsx)("a",{href:"https://github.com/rohit-px2",className:"text-decoration-none",children:" Rohit Pradhan"})]})]})}var N=n(82);function w(e){var t=e.city,n=e.country,r=e.setLocation,s=e.user,o=e.addLocation,l=Object(c.useState)(""),u=Object(i.a)(l,2),d=u[0],j=u[1],h=Object(c.useState)(""),b=Object(i.a)(h,2),p=b[0],x=b[1];function O(){o({city:t,country:n})}return Object(a.jsxs)(N.a,{className:"p-5 m-0 transparent text-white",children:[s&&s&&s.locations&&void 0===s.locations.find((function(e){return e.city===t&&e.country===n}))?Object(a.jsx)("button",{className:"btn btn-secondary mr-auto",onClick:O,type:"button",children:"Add to Dashboard"}):null,Object(a.jsxs)("div",{className:"row row-header justify-content-center",children:[Object(a.jsx)("div",{className:"col-12 mr-5",children:Object(a.jsxs)("h1",{style:{fontSize:"4rem"},className:"text-center",children:[t,", ",n]})}),Object(a.jsxs)("form",{onSubmit:function(){r({city:d,country:p})},className:"mt-2",children:[Object(a.jsxs)("div",{className:"row mr-5",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)("input",{type:"text",value:d,onChange:function(e){return j(e.target.value)},placeholder:"City...",className:"form-control mr-2"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)("input",{type:"text",value:p,onChange:function(e){return x(e.target.value)},placeholder:"Country...",className:" form-control ml-2"})})]}),Object(a.jsx)("div",{className:"row justify-content-center mr-5 mt-3",children:Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})]})]})}var S=n(83),U=n(84),k={Safe:"The air quality is very good. Air pollution poses very little to no risk to anyone.","Moderately Safe":"The air quality is moderately safe. Active children and adults, and people with respiratory disease, such as asthma, should limit prolonged outdoor exertion.","Moderately Unhealthy":"Active children and adults, and people with respiratory disease, such as asthma, should limit prolonged outdoor exertion.",Unhealthy:"Active children and adults, and people with respiratory disease, such as asthma, should avoid prolonged outdoor exertion; everyone else, especially children, should limit prolonged outdoor exertion","Very Unhealthy":"Active children and adults, and people with respiratory disease, such as asthma, should avoid all outdoor exertion; everyone else, especially children, should limit outdoor exertion.",Hazardous:"Everyone should avoid all outdoor exertion."},C={Safe:"#43a047","Moderately Safe":"#fdd835","Moderately Unhealthy":"#f4511e",Unhealthy:"#e53935","Very Unhealthy":"#5e35b1",Hazardous:"#C04000"};function L(e){var t=e.aqi,n=Object(c.useState)(""),r=Object(i.a)(n,2),s=r[0],o=r[1];Object(c.useEffect)((function(){null!==t&&(t<=50?o("Safe"):t>50&&t<=100?o("Moderately Safe"):t>100&&t<=150?o("Moderately Unhealthy"):t>150&&t<=200?o("Unhealthy"):t>200&&t<=300?o("Very Unhealthy"):t>300&&o("Hazardous"))}),[t]);var l={backgroundColor:C[s]};return Object(a.jsxs)(N.a,{style:{backdropFilter:"blur(6px)"},className:"text-white transparent",children:[Object(a.jsx)(S.a,{style:l,className:"mr-auto p-3",children:Object(a.jsxs)(U.a,{children:[Object(a.jsxs)("h1",{className:"text-dark text-center",children:["AQI: ",t]}),Object(a.jsx)("h2",{className:"text-dark text-center",children:s})]})}),Object(a.jsx)("p",{className:"h4 ml-auto p-3 text-center",children:k[s]})]})}var A={co:"Carbon Monoxide",o3:"Ozone",so2:"Sulfur Dioxide",no2:"Nitrogen Dioxide",pm10:Object(a.jsxs)("span",{children:["PM",Object(a.jsx)("sub",{children:"10"})]}),pm25:Object(a.jsxs)("span",{children:["PM",Object(a.jsx)("sub",{children:"2.5"})]}),t:"Temperature",w:"Wind Speed",p:"Air Pressure",h:"Humidity"},I=" ppm",M={co:I,o3:I,so2:I,no2:I,t:Object(a.jsxs)("span",{children:[Object(a.jsx)("sup",{children:" o"}),"C"]}),w:" km/h",p:" hPa",h:Object(a.jsxs)("span",{children:[" g/cm",Object(a.jsx)("sup",{children:"3"})]})};function P(e){var t=e.stat;if(void 0!==t&&null!==t){var n=Object.keys(t)[0],c=t[n].v;return Object(a.jsxs)("div",{className:"d-flex text-white col-md-12 col-xs-6",children:[Object(a.jsx)("h2",{className:"mr-auto p-5",children:A[n]}),Object(a.jsxs)("h2",{className:"ml-auto p-5",children:[c,M[n]?M[n]:""]})]})}return null}function D(e){var t=e.stats;return void 0===t||null===t?null:t.map((function(e,t){return Object(a.jsx)(P,{stat:e},t)}))}var F=n(18);function T(e){var t=e.info,n=e.setLocation,c=e.user,r=e.addLocation;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(F.b,{children:Object(a.jsx)("title",{children:"AQInfo: ".concat(t.city,", ").concat(t.country)})}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(w,{setLocation:n,country:t.country,city:t.city,user:c,addLocation:r}),Object(a.jsx)(L,{aqi:t.aqi}),Object(a.jsx)(D,{stats:t.stats})]})]})}var q=n(87),J=n(85),Q=n(86),z="/api/login";function E(){return(E=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(z,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H={login:function(e){return E.apply(this,arguments)}};function V(e){var t=e.isOpen,n=e.toggleModal,r=e.setUser,s=Object(c.useState)(""),o=Object(i.a)(s,2),l=o[0],u=o[1],d=Object(c.useState)(""),j=Object(i.a)(d,2),h=j[0],b=j[1],p=Object(c.useState)(null),x=Object(i.a)(p,2),O=x[0],m=x[1];function f(){u(""),b(""),m(null),n()}return Object(a.jsxs)(q.a,{isOpen:t,toggle:f,children:[Object(a.jsx)(J.a,{toggle:f,children:"Login"}),Object(a.jsx)("p",{className:"text-danger text-center",children:O||""}),Object(a.jsx)(Q.a,{children:Object(a.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),H.login({username:l,password:h}).then((function(e){console.log(e.data),window.localStorage.setItem("loggedAqiUser",JSON.stringify(e.data)),r(e.data),window.location.replace("/")})).catch((function(e){m(e.response.data.error),setTimeout((function(){m(null)}),3e3)}))}(e)},children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{className:"form-control",onChange:function(e){return u(e.target.value)},type:"text",value:l,placeholder:"Username"}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{className:"form-control",onChange:function(e){return b(e.target.value)},type:"password",value:h,placeholder:"Password"}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)("button",{className:"btn btn-success rounded",type:"submit",children:"Login"})})]})})]})}var W=n(5),B="/api/users";function R(){return(R=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(B,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G={createUser:function(e){return R.apply(this,arguments)}};function K(e){var t=e.isOpen,n=e.toggleModal,r=(e.createUser,Object(W.f)(),Object(c.useState)("")),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(c.useState)(""),d=Object(i.a)(u,2),j=d[0],h=d[1],b=Object(c.useState)(""),p=Object(i.a)(b,2),x=p[0],O=p[1],m=Object(c.useState)(""),f=Object(i.a)(m,2),g=f[0],v=f[1];function y(){h(""),O(""),v(""),l(""),n()}return Object(a.jsxs)(q.a,{isOpen:t,toggle:y,children:[Object(a.jsx)(J.a,{toggle:y,children:"Sign Up"}),Object(a.jsx)("p",{className:"text-success text-center",children:o}),Object(a.jsx)("p",{className:"text-danger text-center",children:g}),Object(a.jsx)(Q.a,{children:Object(a.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),G.createUser({username:j,password:x}).then((function(e){l("Successfully signed up!"),setTimeout((function(){return window.location.replace("/")}),500)})).catch((function(e){409===e.response.status?v("That username is taken."):500===e.response.status&&v("Unable to sign up right now. Please try later.")}))}(e)},children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{className:"form-control",onChange:function(e){return h(e.target.value)},type:"text",value:j,placeholder:"Username"}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{className:"form-control",onChange:function(e){return O(e.target.value)},type:"password",value:x,placeholder:"Password"}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)("button",{className:"btn btn-success rounded",type:"submit",children:"Sign Up"})})]})})]})}function X(e){var t=e.user,n=e.clearUser,r=e.setUser,s=Object(c.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],d=Object(c.useState)(!1),j=Object(i.a)(d,2),h=j[0],b=j[1];function p(){console.log("Toggling login..."),u(!l)}function x(){console.log("Toggling signup..."),b(!h)}return Object(a.jsxs)("nav",{className:"navbar navbar-light bg-dark",children:[Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("ul",{className:"nav",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{href:"/",className:"navbar-brand text-light",children:"AQInfo"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{href:"/dashboard",className:"nav-link active text-light",children:"Dashboard"})})]}),Object(a.jsxs)("ul",{className:"nav",children:[Object(a.jsx)("li",{className:"nav-item px-2",children:null===t||void 0===t?Object(a.jsxs)("button",{className:"btn btn-outline-light rounded",onClick:function(){return p()},children:[Object(a.jsx)("span",{className:"fa fa-sign-in fa-lg"})," Login"]}):Object(a.jsx)("span",{className:"text-light",children:t.username})}),Object(a.jsx)("li",{className:"nav-item",children:null===t||void 0===t?Object(a.jsxs)("button",{className:"btn btn-outline-light rounded",onClick:function(){return x()},children:[Object(a.jsx)("span",{className:"fa fa-address-card fa-lg"})," Sign Up"]}):Object(a.jsx)("button",{className:"btn btn-outline-light rounded",onClick:function(){return n(),void window.location.replace("/")},children:"Log Out"})})]})]}),Object(a.jsx)(V,{isOpen:l,toggleModal:p,setUser:r}),Object(a.jsx)(K,{isOpen:h,toggleModal:x})]})}var Y=n(22);function Z(e){var t=e.user,n=e.setLocation;var c=t?t.locations.map((function(e,t){return Object(a.jsx)("div",{className:"col-12 col-md-6 m-3",children:Object(a.jsxs)("button",{className:"btn btn-outline-light",onClick:function(){return function(e){n(e),window.location.assign("/")}(e)},children:[e.city,", ",e.country]})},t)})):null;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(F.a,{children:Object(a.jsx)("title",{children:"Dashboard"})}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("h2",{className:"text-center text-white p-2",children:"Dashboard"}),Object(a.jsx)("hr",{style:{backgroundColor:"white"},className:"m-2"}),null===t?Object(a.jsx)("p",{className:"text-white h3 text-center",children:"Please login to view your dashboard."}):null,c]})]})}function $(){var e=Object(c.useState)({}),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)({}),l=Object(i.a)(s,2),u=(l[0],l[1]),d=Object(c.useState)(null),j=Object(i.a)(d,2),h=j[0],b=j[1],p="loggedAqiUser";var x="location";function O(e){u(e),window.localStorage.setItem(x,JSON.stringify(e)),m.getAQI(e).then((function(e){return r(e)})).catch((function(e){return console.error("File not found:",e)}))}return Object(c.useEffect)((function(){var e=window.localStorage.getItem(p);if(e){var t=JSON.parse(e);b(t)}}),[]),Object(c.useEffect)((function(){var e=window.localStorage.getItem(x);e?O(JSON.parse(e)):v.getLocation().then((function(e){return O(e)}))}),[]),Object(a.jsxs)(Y.a,{children:[Object(a.jsx)(X,{user:h,clearUser:function(){b(null),window.localStorage.clear()},setUser:function(e){b(e)}}),Object(a.jsxs)(W.c,{children:[Object(a.jsx)(W.a,{path:"/dashboard",children:Object(a.jsx)(Z,{user:h,setLocation:O})}),Object(a.jsx)(W.a,{path:"/",children:Object(a.jsx)(T,{info:n,setLocation:O,user:h,addLocation:function(e){m.create(e).then((function(t){var n=h.locations.concat(e),a=Object(o.a)(Object(o.a)({},h),{},{locations:n});window.localStorage.setItem(p,JSON.stringify(a)),b(a)})).catch((function(e){return console.log("Could not add to dashboard")}))}})})]}),Object(a.jsx)(y,{})]})}n(79),n(80);s.a.render(Object(a.jsx)($,{}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.37206857.chunk.js.map